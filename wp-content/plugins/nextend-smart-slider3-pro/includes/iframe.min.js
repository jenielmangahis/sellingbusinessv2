"function"!=typeof window.n2SSIframeLoader&&function(t){var e=[],i=window.addEventListener?"addEventListener":"attachEvent";function n(e,i){this.i=i,this.frame=e,this.$frame=t(e)}window[i]("attachEvent"===i?"onmessage":"message",function(t){for(var i=0;i<e.length;i++)e[i]&&e[i].match(t.source)&&e[i].message(t[t.message?"message":"data"])}),n.prototype.match=function(t){return t===(this.frame.contentWindow||this.frame.contentDocument)&&(this.frameContent=this.frame.contentWindow||this.frame.contentDocument,!0)},n.prototype.message=function(e){switch(e.key){case"setLocation":"function"==typeof window.zajax_goto?window.zajax_goto(e.location):window.location=e.location;break;case"ready":var i=this.getClientHeight();this.frameContent.postMessage({key:"ackReady",clientHeight:i},"*");break;case"resize":if(e.fullPage?this.fullpage!==e.fullPage&&(this.fullpage=e.fullPage,this.verticalOffsetSelectors=t(e.verticalOffsetSelectors),this.resizeFullPage(),t(window).on("resize.n2-ss-iframe-"+this.i,t.proxy(this.resizeFullPage,this)),t(window).on("orientationchange.n2-ss-iframe-"+this.i,t.proxy(this.resizeFullPage,this))):this.fullpage=0,this.$frame.css({height:e.height}),e.forceFull&&this.forcefull!==e.forceFull)this.forcefull=e.forceFull,t("body").css("overflow-x","hidden"),this.resizeFullWidth(),t(window).on("resize.n2-ss-iframe-"+this.i,t.proxy(this.resizeFullWidth,this))}},n.prototype.exists=function(){return!!t.contains(document.body,this.frame)||(e[this.i]=!1,t(window).off(".n2-ss-iframe-"+this.i),!1)},n.prototype.resizeFullWidth=function(e){if(this.exists()){var i=0,n=0,s=t(".editor-writing-flow,.fl-responsive-preview .fl-builder-content");s.length&&(i=s.width(),n=s.offset().left);var o,a=i>0?i:document.body.clientWidth||document.documentElement.clientWidth,r=this.$frame.parent(),h=r[0].getBoundingClientRect(),l="rtl"===t("html").attr("dir");o=l?a-(h.left+r.outerWidth()):h.left,this.$frame.css(l?"marginRight":"marginLeft",-o-parseInt(r.css("paddingLeft"))-parseInt(r.css("borderLeftWidth"))+n).css("maxWidth","none").width(a)}},n.prototype.resizeFullPage=function(t){if(this.exists()){for(var e=this.getClientHeight(t),i=0;i<this.verticalOffsetSelectors.length;i++)e-=this.verticalOffsetSelectors.eq(i).outerHeight();this.frameContent.postMessage({key:"update",clientHeight:e},"*"),this.$frame.height(e)}},n.prototype.getClientHeight=function(t){var e=0;if(window.matchMedia&&/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera)){var i,n=!1,s=this.lastOrientation;t&&"orientationchange"===t.type&&(n=!0),i=/iPad|iPhone|iPod/.test(navigator.platform)?document.documentElement.clientHeight:window.innerHeight,window.matchMedia("(orientation: landscape)").matches?(e=Math.min(screen.width,i),90!==s&&(n=!0,this.lastOrientation=90)):(e=Math.min(screen.height,i),0!==s&&(n=!0,this.lastOrientation=0)),!n&&Math.abs(e-this.lastClientHeight)<100?e=this.lastClientHeight:this.lastClientHeight=e}else e=document.documentElement.clientHeight||document.body.clientHeight;return e},window.n2SSIframeLoader=function(t){e.push(new n(t,e.length))}}(jQuery);